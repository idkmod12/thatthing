-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local TextChatService = game:GetService("TextChatService")
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- State
local isSpamming = false
local parts, beams = {}, {}
local musicSound
local discoSkyTween

-- Helper: Rainbow color generator
local function getRainbowColor(speed, offset)
    local h = (tick() * speed + (offset or 0)) % 1
    return Color3.fromHSV(h, 1, 1)
end

-- Black-white glow tween for labels
local function glowBlackWhiteLabel(label)
    local goal1 = {TextColor3 = Color3.new(0,0,0)}
    local goal2 = {TextColor3 = Color3.new(1,1,1)}
    local tweenInfo = TweenInfo.new(5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
    local tween1 = TweenService:Create(label, tweenInfo, goal1)
    local tween2 = TweenService:Create(label, tweenInfo, goal2)
    tween1:Play()
    tween1.Completed:Connect(function()
        tween2:Play()
    end)
    tween2.Completed:Connect(function()
        tween1:Play()
    end)
end

-- Part Spam (Parts + Beams)
local function startSpamming()
    if isSpamming then return end
    isSpamming = true
    spawn(function()
        while isSpamming do
            local last
            for i = 1, 40 do
                local p = Instance.new("Part", workspace)
                p.Anchored = true
                p.CanCollide = false
                p.Size = Vector3.new(5,5,5)
                p.Position = Vector3.new(math.random(-500,500), math.random(10,200), math.random(-500,500))
                p.Color = getRainbowColor(0.2, i*0.05)
                p.Material = Enum.Material.Neon
                table.insert(parts, p)

                if last then
                    local a0 = Instance.new("Attachment", last)
                    local a1 = Instance.new("Attachment", p)
                    local beam = Instance.new("Beam", last)
                    beam.Attachment0 = a0
                    beam.Attachment1 = a1
                    beam.Width0 = 0.5
                    beam.Width1 = 0.5
                    beam.Color = ColorSequence.new(getRainbowColor(0.2, i*0.05), getRainbowColor(0.2, i*0.05+0.5))
                    beam.FaceCamera = true
                    beam.LightEmission = 1
                    table.insert(beams, beam)
                end
                last = p
                if i >= 50 then break end
            end
            wait(0.3)
        end
    end)
end

local function stopSpamming()
    isSpamming = false
    for _, p in ipairs(parts) do if p.Parent then p:Destroy() end end
    for _, b in ipairs(beams) do if b.Parent then b:Destroy() end end
    parts, beams = {}, {}
end

-- Particle Spammer
local function startParticleSpam()
    for _, plr in pairs(Players:GetPlayers()) do
        if plr.Character and plr.Character:FindFirstChild("Head") then
            local emit = Instance.new("ParticleEmitter")
            emit.Parent = plr.Character.Head
            emit.Texture = "rbxassetid://70808795321734"
            emit.VelocitySpread = 100000
        end
    end
end

-- Decal Spammer
local function startDecalSpam()
    local decalId = "http://www.roblox.com/asset/?id=70808795321734"
    local function exPro(root)
        for _, v in pairs(root:GetChildren()) do
            if v:IsA("Decal") and v.Texture ~= decalId then
                v.Parent = nil
            elseif v:IsA("BasePart") then
                v.Material = Enum.Material.Plastic
                v.Transparency = 0
                local One = Instance.new("Decal", v)
                local Two = Instance.new("Decal", v)
                local Three = Instance.new("Decal", v)
                local Four = Instance.new("Decal", v)
                local Five = Instance.new("Decal", v)
                local Six = Instance.new("Decal", v)
                One.Texture = decalId
                Two.Texture = decalId
                Three.Texture = decalId
                Four.Texture = decalId
                Five.Texture = decalId
                Six.Texture = decalId
                One.Face = Enum.NormalId.Front
                Two.Face = Enum.NormalId.Back
                Three.Face = Enum.NormalId.Right
                Four.Face = Enum.NormalId.Left
                Five.Face = Enum.NormalId.Top
                Six.Face = Enum.NormalId.Bottom
            end
            exPro(v)
        end
    end
    exPro(Workspace)
end

-- Skybox changer
local function changeSkybox()
    local decalId = "108493850623012"
    local s = Instance.new("Sky")
    s.Name = "Sky"
    s.Parent = Lighting
    s.SkyboxBk = "http://www.roblox.com/asset/?id="..decalId
    s.SkyboxDn = "http://www.roblox.com/asset/?id="..decalId
    s.SkyboxFt = "http://www.roblox.com/asset/?id="..decalId
    s.SkyboxLf = "http://www.roblox.com/asset/?id="..decalId
    s.SkyboxRt = "http://www.roblox.com/asset/?id="..decalId
    s.SkyboxUp = "http://www.roblox.com/asset/?id="..decalId
    Lighting.TimeOfDay = 12
end

-- Delete Terrain button action
local function deleteTerrain()
    if Workspace:FindFirstChild("Terrain") then
        Workspace.Terrain:Clear()
    end
end

-- Music controls
local function playMusic(id)
    if musicSound then musicSound:Destroy() end
    musicSound = Instance.new("Sound", workspace)
    musicSound.SoundId = "rbxassetid://"..id
    musicSound.Looped = true
    musicSound.Volume = 1
    musicSound:Play()
end

local function stopMusic()
    if musicSound then musicSound:Destroy() musicSound = nil end
end

-- Create button helper
local function createButton(parent, text, posX, posY, width, height, callback)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, width or 150, 0, height or 30)
    btn.Position = UDim2.new(0, posX, 0, posY)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(88, 36, 133) -- Deep purple
    btn.TextColor3 = Color3.new(1,1,1)
    btn.AutoButtonColor = true
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 6)
    btn.MouseButton1Click:Connect(callback)
    return btn
end

-- Create label helper
local function createRainbowLabel(parent, text, posX, posY)
    local lbl = Instance.new("TextLabel", parent)
    lbl.Size = UDim2.new(0, 200, 0, 24)
    lbl.Position = UDim2.new(0, posX, 0, posY)
    lbl.BackgroundTransparency = 1
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = 18
    lbl.Text = text
    lbl.TextColor3 = Color3.new(1,1,1)
    glowBlackWhiteLabel(lbl)
    return lbl
end

-- Create TextBox helper
local function createTextBox(parent, placeholder, posX, posY, width, height)
    local box = Instance.new("TextBox", parent)
    box.Size = UDim2.new(0, width or 200, 0, height or 30)
    box.Position = UDim2.new(0, posX, 0, posY)
    box.PlaceholderText = placeholder or ""
    box.TextColor3 = Color3.new(1,1,1)
    box.BackgroundColor3 = Color3.new(0,0,0)
    box.ClearTextOnFocus = false
    box.Text = ""
    local corner = Instance.new("UICorner", box)
    corner.CornerRadius = UDim.new(0, 6)
    return box
end

-- GUI setup
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "UserGalaxyGUI"
gui.ResetOnSpawn = false

-- Tab Bar (fixed top)
local tabBar = Instance.new("Frame", gui)
tabBar.Size = UDim2.new(1, 0, 0, 40)
tabBar.Position = UDim2.new(0, 0, 0, 0)
tabBar.BackgroundColor3 = Color3.fromRGB(15,15,40)
tabBar.BorderSizePixel = 0
local tabBarCorner = Instance.new("UICorner", tabBar)
tabBarCorner.CornerRadius = UDim.new(0, 8)

-- Minimize and Close Buttons
local closeBtn = Instance.new("TextButton", tabBar)
closeBtn.Size = UDim2.new(0, 36, 1, -8)
closeBtn.Position = UDim2.new(1, -42, 0, 4)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1, 0.4, 0.4)
closeBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
closeBtn.AutoButtonColor = true
local closeBtnCorner = Instance.new("UICorner", closeBtn)
closeBtnCorner.CornerRadius = UDim.new(0, 6)

local minimizeBtn = Instance.new("TextButton", tabBar)
minimizeBtn.Size = UDim2.new(0, 36, 1, -8)
minimizeBtn.Position = UDim2.new(1, -84, 0, 4)
minimizeBtn.Text = "-"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 24
minimizeBtn.TextColor3 = Color3.new(1, 1, 1)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
minimizeBtn.AutoButtonColor = true
local minimizeBtnCorner = Instance.new("UICorner", minimizeBtn)
minimizeBtnCorner.CornerRadius = UDim.new(0, 6)

-- Content window (draggable, below tabBar)
local contentWnd = Instance.new("Frame", gui)
contentWnd.Size = UDim2.new(0, 620, 0, 320)
contentWnd.Position = UDim2.new(0.5, -310, 0, 40)
contentWnd.BackgroundColor3 = Color3.fromRGB(15,15,40)
contentWnd.BorderSizePixel = 0
contentWnd.Active = true
contentWnd.Draggable = true
local contentCorner = Instance.new("UICorner", contentWnd)
contentCorner.CornerRadius = UDim.new(0, 8)

-- Title label on contentWnd
local contentTitle = Instance.new("TextLabel", contentWnd)
contentTitle.Size = UDim2.new(1, -10, 0, 28)
contentTitle.Position = UDim2.new(0, 5, 0, 5)
contentTitle.BackgroundTransparency = 1
contentTitle.Font = Enum.Font.GothamBold
contentTitle.TextSize = 20
contentTitle.TextColor3 = Color3.new(1,1,1)
contentTitle.TextXAlignment = Enum.TextXAlignment.Left
contentTitle.Text = "USER'S SS"
glowBlackWhiteLabel(contentTitle)

-- Tabs and their contents
local tabs = {
    "Spam Stuff",
    "Players",
    "Chat
    Effects",
    "Workspace",
    "Music Controls",
    "Skybox Controls"
}

-- Add content to the Workspace tab
local workspaceContent = Instance.new("Frame", contentWnd)
workspaceContent.Size = UDim2.new(1, -20, 1, -40)
workspaceContent.Position = UDim2.new(0, 10, 0, 35)
workspaceContent.BackgroundTransparency = 1

createButton(workspaceContent, "Start Particle Spam", 10, 10, 180, 30, startParticleSpam)
createButton(workspaceContent, "Start Decal Spam", 10, 50, 180, 30, startDecalSpam)
createButton(workspaceContent, "Change Skybox", 10, 90, 180, 30, changeSkybox)
createButton(workspaceContent, "Delete Terrain", 10, 130, 180, 30, deleteTerrain)

-- More content for other tabs can be added similarly...

-- Show the workspaceContent as default
workspaceContent.Visible = true

-- Add logic here to switch tabs as needed...

-- Button actions
closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)
minimizeBtn.MouseButton1Click:Connect(function()
contentWnd.Visible = not contentWnd.Visible
end)
